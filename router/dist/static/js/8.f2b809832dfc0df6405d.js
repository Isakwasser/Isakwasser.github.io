webpackJsonp([8],{GJcV:function(t,e,i){t.exports=i.p+"static/media/sound.a24f99b.wav"},"ans+":function(t,e){},pXK8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("504h");var n={data:function(){return{windowWidth:.01,fs:void 0}},methods:{step1:function(){var t=this,e=new(AudioContext||webkitAudioContext),i=new XMLHttpRequest;i.open("GET",this.$refs.audio.src,!0),i.responseType="arraybuffer",i.onload=function(){e.decodeAudioData(i.response,function(e){var i=e.getChannelData(0);t.showSpectrogramByBytes(i,e.sampleRate)},function(t){console.log("Decode error: "+t)})},i.send()},showSpectrogramByBytes:function(t,e){var i=this,n=document.getElementById("spectrogram");n.style.position="relative",n.width=t.length/e/this.windowWidth*2,n.height=e*this.windowWidth;var a=n.getContext("2d");a.clearRect(0,0,n.width,n.height),a.fillStyle="rgb(0, 0, 0)",a.fillRect(0,0,n.width,n.height);!function s(o){console.log(o);for(var r=function(t,e){for(var i={amplitude:[],frequency:[],Re:[],Im:[]},n=t.length,a=1/Math.sqrt(n),s=[],o=[],r=0;r<n;r++){for(var c=0,l=0,u=0;u<n;u++)c+=t[u]*Math.cos(2*Math.PI/n*u*r),l+=t[u]*Math.sin(2*Math.PI/n*u*r);s[r]=a*c,o[r]=-a*l}i.Re=s,i.Im=o;for(var d=0;d<i.Im.length;d++)i.amplitude.push(Math.sqrt(i.Re[d]*i.Re[d]+i.Im[d]*i.Im[d])),i.frequency.push(d*e/i.Im.length);return i}(t.slice(o*e*i.windowWidth,(o+1)*e*i.windowWidth),e),c=[],l=[],u=0;u<r.amplitude.length/2;u++)c.push(Math.log(100*r.amplitude[u])/8),l.push(r.frequency[u]);for(var d=2*o,h=n.height,f=0;f<l.length;f++)a.fillStyle="rgba(255, 255, 255,"+c[f]+")",a.fillRect(d,h,3,2),h-=2;(o+1)*e*i.windowWidth<t.length&&setTimeout(s,0,o+1)}(0)},getSpectrogram:function(){var t=this,e=new(AudioContext||webkitAudioContext),i=new XMLHttpRequest;i.open("GET",this.$refs.audio.src,!0),i.responseType="arraybuffer",i.onload=function(){e.decodeAudioData(i.response,function(e){t.initAudioBuffer=e;var i=e.getChannelData(0);console.log("float32Array",i)},function(t){console.log("Decode error: "+t)})},i.send()},playFloat32Array:function(t){for(var e=new(window.AudioContext||window.webkitAudioContext),i=(t.getChannelData(0),0);i<t.length;i++);var n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start(),this.$refs.stop.onclick=function(){n.stop()}},test:function(){var t=new AudioContext,e=new Audio;e.src="/static/media/sound.wav",e.autoplay=!0,e.preload="auto";var i=t.createMediaElementSource(e),n=t.createAnalyser();n.fftSize=8192;var a=n.frequencyBinCount,s=new Uint8Array(a);i.connect(n),n.connect(t.destination);var o=document.getElementById("spectrogram");o.style.position="relative",o.width=window.innerWidth,o.height=a;var r=o.getContext("2d");r.clearRect(0,0,o.width,o.height),r.fillStyle="rgb(0, 0, 0)",r.fillRect(0,0,o.width,o.height),function t(){var e=r.getImageData(0,0,o.width,o.height);n.getByteFrequencyData(s),r.fillStyle="rgb(0, 0, 0)",r.fillRect(0,0,o.width,o.height),r.putImageData(e,2,0);for(var i=o.height,c=0;c<a;c++){var l=s[c]/255;r.fillStyle="rgba(255, 255, 255,"+l+")",r.fillRect(0,i,4,1),i-=1}requestAnimationFrame(t)}()},filter:function(){var t=new(AudioContext||webkitAudioContext),e=t.createMediaElementSource(this.$refs.audio),i=t.createBiquadFilter();e.connect(i),i.connect(t.destination),i.frequency.value=1e4,i.gain.value=30,i.type="highpass",i.frequency.setValueAtTime(0,t.currentTime),i.frequency.linearRampToValueAtTime(120,t.currentTime+10),console.log("filter end")}},mounted:function(){}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"appDigitalInit"},[n("div",{staticClass:"appDigital_S07"},[n("h2",{staticClass:"text-center"},[t._v("Самостоятельная работа №7 123")]),t._v(" "),n("div",{staticClass:"step"},[t._m(0),t._v(" "),n("div",{staticClass:"step__content"},[n("div",{staticClass:"step__descryption"},[t._v("Аудиофайл")]),t._v(" "),n("div",{staticClass:"step__action"},[n("audio",{ref:"audio",attrs:{controls:"",src:i("GJcV")}},[t._v("\n            Тег audio не поддерживается вашим браузером.\n          ")])])])]),t._v(" "),n("div",{staticClass:"step"},[t._m(1),t._v(" "),n("div",{staticClass:"step__content"},[n("div",{staticClass:"step__descryption"},[n("button",{on:{click:t.step1}},[t._v("Получить спектрограмму")])]),t._v(" "),t._m(2)])]),t._v(" "),n("div",{staticClass:"step"},[t._m(3),t._v(" "),n("div",{staticClass:"step__content"},[n("div",{staticClass:"step__descryption"},[n("button",{on:{click:t.filter}},[t._v("Фильтр")]),t._v(" "),n("button",{ref:"filter_stop"},[t._v("Stop")])]),t._v(" "),n("div",{staticClass:"step__action"})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("1")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("2")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__action",staticStyle:{background:"#3b4652"}},[e("canvas",{attrs:{id:"spectrogram"}}),this._v(" "),e("div",{attrs:{id:"fft"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("3")])])}]};var s=i("VU/8")(n,a,!1,function(t){i("ans+")},null,null);e.default=s.exports}});
//# sourceMappingURL=8.f2b809832dfc0df6405d.js.map