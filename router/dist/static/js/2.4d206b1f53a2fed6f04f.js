webpackJsonp([2],{"+E39":function(t,e,n){t.exports=!n("S82l")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"+ZMJ":function(t,e,n){var i=n("lOnJ");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"77Pl":function(t,e,n){var i=n("EqjI");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},"7KvD":function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},D2L2:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},EqjI:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},FeBl:function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},K4R9:function(t,e,n){n("NA/8"),t.exports=n("FeBl").Number.isNaN},MICi:function(t,e,n){t.exports={default:n("K4R9"),__esModule:!0}},MmMw:function(t,e,n){var i=n("EqjI");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"NA/8":function(t,e,n){var i=n("kM2E");i(i.S,"Number",{isNaN:function(t){return t!=t}})},ON07:function(t,e,n){var i=n("EqjI"),r=n("7KvD").document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},S82l:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},SfB7:function(t,e,n){t.exports=!n("+E39")&&!n("S82l")(function(){return 7!=Object.defineProperty(n("ON07")("div"),"a",{get:function(){return 7}}).a})},X8DO:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},evD5:function(t,e,n){var i=n("77Pl"),r=n("SfB7"),o=n("MmMw"),a=Object.defineProperty;e.f=n("+E39")?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},hJx8:function(t,e,n){var i=n("evD5"),r=n("X8DO");t.exports=n("+E39")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},k5iw:function(t,e,n){t.exports=n.p+"static/media/sound_sm.e069115.wav"},kM2E:function(t,e,n){var i=n("7KvD"),r=n("FeBl"),o=n("+ZMJ"),a=n("hJx8"),s=n("D2L2"),c=function(t,e,n){var u,l,f,d=t&c.F,p=t&c.G,v=t&c.S,h=t&c.P,_=t&c.B,m=t&c.W,w=p?r:r[e]||(r[e]={}),g=w.prototype,y=p?i:v?i[e]:(i[e]||{}).prototype;for(u in p&&(n=e),n)(l=!d&&y&&void 0!==y[u])&&s(w,u)||(f=l?y[u]:n[u],w[u]=p&&"function"!=typeof y[u]?n[u]:_&&l?o(f,i):m&&y[u]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):h&&"function"==typeof f?o(Function.call,f):f,h&&((w.virtual||(w.virtual={}))[u]=f,t&c.R&&g&&!g[u]&&a(g,u,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},lOnJ:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},pXK8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("MICi"),r=n.n(i);n("504h");var o={data:function(){return{windowWidth:.01,fs:void 0,cutoffF:100}},methods:{step1:function(){var t=this,e=new(AudioContext||webkitAudioContext),n=new XMLHttpRequest;n.open("GET",this.$refs.audio.src,!0),n.responseType="arraybuffer",n.onload=function(){e.decodeAudioData(n.response,function(e){var n=e.getChannelData(0);t.showSpectrogramByBytes(n,e.sampleRate)},function(t){console.log("Decode error: "+t)})},n.send()},showSpectrogramByBytes:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"spectrogram";console.log(e);var r=document.getElementById(i);r.style.position="relative",r.width=t.length/e/this.windowWidth*2,r.height=e*this.windowWidth;var o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),o.fillStyle="rgb(0, 0, 0)",o.fillRect(0,0,r.width,r.height);var a=100,s=0;!function i(c){for(var u=function(t,e){for(var n={amplitude:[],frequency:[],Re:[],Im:[]},i=t.length,r=1/Math.sqrt(i),o=[],a=[],s=0;s<i;s++){for(var c=0,u=0,l=0;l<i;l++)c+=t[l]*Math.cos(2*Math.PI/i*l*s),u+=t[l]*Math.sin(2*Math.PI/i*l*s);o[s]=r*c,a[s]=-r*u}n.Re=o,n.Im=a;for(var f=0;f<n.Im.length;f++)n.amplitude.push(Math.sqrt(n.Re[f]*n.Re[f]+n.Im[f]*n.Im[f])),n.frequency.push(f*e/n.Im.length);return n}(t.slice(c*e*n.windowWidth,(c+1)*e*n.windowWidth),e),l=[],f=[],d=0;d<u.amplitude.length/2;d++){var p=Math.log(u.amplitude[d])/10+1;p=u.amplitude[d]/5,p=Math.log(u.amplitude[d]+1)/2,a>p&&(a=p),s<p&&(s=p),p<0&&(p=0),p>1&&(p=1),l.push(p),f.push(u.frequency[d])}for(var v=2*c,h=r.height-2,_=0;_<f.length;_++)o.fillStyle="rgba(255, 255, 255,"+l[_]+")",o.fillRect(v,h,3,2),h-=2;(c+1)*e*n.windowWidth<t.length&&setTimeout(i,0,c+1)}(0)},getSpectrogram:function(){var t=this,e=new(AudioContext||webkitAudioContext),n=new XMLHttpRequest;n.open("GET",this.$refs.audio.src,!0),n.responseType="arraybuffer",n.onload=function(){e.decodeAudioData(n.response,function(e){t.initAudioBuffer=e;var n=e.getChannelData(0);console.log("float32Array",n)},function(t){console.log("Decode error: "+t)})},n.send()},playFloat32Array:function(t){for(var e=new(window.AudioContext||window.webkitAudioContext),n=(t.getChannelData(0),0);n<t.length;n++);var i=e.createBufferSource();i.buffer=t,i.connect(e.destination),i.start(),this.$refs.stop.onclick=function(){i.stop()}},test:function(){var t=new AudioContext,e=new Audio;e.src="/static/media/sound.wav",e.autoplay=!0,e.preload="auto";var n=t.createMediaElementSource(e),i=t.createAnalyser();i.fftSize=8192;var r=i.frequencyBinCount,o=new Uint8Array(r);n.connect(i),i.connect(t.destination);var a=document.getElementById("spectrogram");a.style.position="relative",a.width=window.innerWidth,a.height=r;var s=a.getContext("2d");s.clearRect(0,0,a.width,a.height),s.fillStyle="rgb(0, 0, 0)",s.fillRect(0,0,a.width,a.height),function t(){var e=s.getImageData(0,0,a.width,a.height);i.getByteFrequencyData(o),s.fillStyle="rgb(0, 0, 0)",s.fillRect(0,0,a.width,a.height),s.putImageData(e,2,0);for(var n=a.height,c=0;c<r;c++){var u=o[c]/255;s.fillStyle="rgba(255, 255, 255,"+u+")",s.fillRect(0,n,4,1),n-=1}requestAnimationFrame(t)}()},filter:function(){var t=new(AudioContext||webkitAudioContext),e=t.createMediaElementSource(this.$refs.audio),n=t.createBiquadFilter();e.connect(n),n.connect(t.destination),n.frequency.value=1e4,n.gain.value=30,n.type="highpass",n.frequency.setValueAtTime(0,t.currentTime),n.frequency.linearRampToValueAtTime(120,t.currentTime+10),console.log("filter end")},step2:function(){var t=this,e=new(AudioContext||webkitAudioContext),n=new XMLHttpRequest;n.open("GET",this.$refs.audio2.src,!0),n.responseType="arraybuffer",n.onload=function(){e.decodeAudioData(n.response,function(e){var n=e.getChannelData(0);t.filterButterworth(n),t.showSpectrogramByBytes(n,e.sampleRate,"spectrogram2"),t.playFloat32Array(e)},function(t){console.log("Decode error: "+t)})},n.send()},filterButterworth:function(t){for(var e=t.slice(0),n=void 0,i=2*Math.PI*this.cutoffF,o=Math.tan(Math.PI*i/48e3),a=1+o*Math.sqrt(2)+o*o,s=[o*o/a,2*o*o/a,o*o/a],c=[1,2*(o*o-1)/a,(1-o*Math.sqrt(2)+o*o)/a],u=0;u<t.length;u++){n=0;for(var l=0;l<s.length;l++)u-l>=0&&(n+=s[l]*e[u-l]);for(var f=1;f<c.length;f++)u-f>=0&&(n-=c[f]*t[u-f]);r()(n)&&console.log(u),t[u]=n}return t}},mounted:function(){}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"appDigitalInit"},[i("div",{staticClass:"appDigital_S07"},[i("h2",{staticClass:"text-center"},[t._v("Самостоятельная работа №7")]),t._v(" "),i("div",{staticClass:"step"},[t._m(0),t._v(" "),i("div",{staticClass:"step__content"},[i("div",{staticClass:"step__descryption"},[t._v("Аудиофайл")]),t._v(" "),i("div",{staticClass:"step__action"},[i("audio",{ref:"audio",attrs:{controls:"",src:n("k5iw")}},[t._v("\n            Тег audio не поддерживается вашим браузером.\n          ")])])])]),t._v(" "),i("div",{staticClass:"step"},[t._m(1),t._v(" "),i("div",{staticClass:"step__content"},[i("div",{staticClass:"step__descryption"},[i("button",{on:{click:t.step1}},[t._v("\n            Получить спектрограмму c временным разрешением "+t._s(t.windowWidth)+"с\n          ")])]),t._v(" "),t._m(2)])]),t._v(" "),i("div",{staticClass:"step"},[t._m(3),t._v(" "),i("div",{staticClass:"step__content"},[i("div",{staticClass:"step__descryption"},[t._v("Аудиофайл")]),t._v(" "),i("div",{staticClass:"step__action"},[i("audio",{ref:"audio2",attrs:{controls:"",src:n("k5iw")}},[t._v("\n            Тег audio не поддерживается вашим браузером.\n          ")])])])]),t._v(" "),i("div",{staticClass:"step"},[t._m(4),t._v(" "),i("div",{staticClass:"step__content"},[i("div",{staticClass:"step__descryption"},[i("h4",[t._v("Фильтр Баттерворта. ФНЧ")]),t._v(" "),i("div",{staticClass:"d-flex"},[i("label",{staticClass:"col-2"},[t._v("Частота среза, Гц:")]),t._v(" "),i("div",{},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.cutoffF,expression:"cutoffF"}],attrs:{type:"text"},domProps:{value:t.cutoffF},on:{input:function(e){e.target.composing||(t.cutoffF=e.target.value)}}})])]),t._v(" "),i("button",{on:{click:t.step2}},[t._v("\n            Фильтр, спектрограмма, воспроизведение\n          ")]),t._v(" "),i("button",{ref:"stop"},[t._v("Остановить воспроизведение")])]),t._v(" "),t._m(5)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("1")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("2")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__action"},[e("canvas",{attrs:{id:"spectrogram"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("3")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("4")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__action"},[e("canvas",{attrs:{id:"spectrogram2"}})])}]};var s=n("VU/8")(o,a,!1,function(t){n("qnCP")},null,null);e.default=s.exports},qnCP:function(t,e){}});
//# sourceMappingURL=2.4d206b1f53a2fed6f04f.js.map