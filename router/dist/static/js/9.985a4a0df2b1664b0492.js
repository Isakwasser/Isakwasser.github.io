webpackJsonp([9],{"/XyJ":function(t,e,i){t.exports=i.p+"static/media/44100music.91d7798.wav"},KPK1:function(t,e){},pXK8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{initAudioBuffer:void 0}},methods:{step1:function(){var t=this,e=new(AudioContext||webkitAudioContext),i=new XMLHttpRequest;i.open("GET",this.$refs.audio.src,!0),i.responseType="arraybuffer",i.onload=function(){e.decodeAudioData(i.response,function(e){t.initAudioBuffer=e;var i=e.getChannelData(0);console.log("float32Array",i),t.getSpectrogram()},function(t){console.log("Decode error: "+t)})},i.send()},getSpectrogram:function(){console.log(this.initAudioBuffer);var t=new(AudioContext||webkitAudioContext),e=t.createAnalyser();console.log(this.initAudioBuffer),e.fftSize=256;var i=t.createMediaElementSource(this.$refs.audio),n=e.frequencyBinCount,a=new Uint8Array(n),s=document.getElementById("spectrogram");i.connect(e),e.connect(t.destination),s.width=n,s.height=window.innerHeight,console.log(1);var o=s.getContext("2d");!function t(){var i=o.getImageData(0,0,s.width,s.height+1);e.getByteFrequencyData(a);for(var r=s.height-1,c=0;c<n;c++){var u=4*(r*i.width+c);i.data[u]=255,i.data[u+1]=255,i.data[u+2]=255,i.data[u+3]=a[c]}o.putImageData(i,0,-1),requestAnimationFrame(t)}()},playFloat32Array:function(t){for(var e=new(window.AudioContext||window.webkitAudioContext),i=(t.getChannelData(0),0);i<t.length;i++);var n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start(),this.$refs.stop.onclick=function(){n.stop()}},test:function(){var t=new AudioContext,e=new Audio;e.src="/static/media/44100music.91d7798.wav",e.autoplay=!0,e.preload="auto";var i=t.createMediaElementSource(e),n=t.createAnalyser();n.fftSize=8192;var a=n.frequencyBinCount,s=new Uint8Array(a);i.connect(n),n.connect(t.destination);var o=document.getElementById("spectrogram");o.style.position="relative",o.width=window.innerWidth,o.height=a;var r=o.getContext("2d");r.clearRect(0,0,o.width,o.height),r.fillStyle="rgb(0, 0, 0)",r.fillRect(0,0,o.width,o.height),function t(){var e=r.getImageData(0,0,o.width,o.height);n.getByteFrequencyData(s),r.fillStyle="rgb(0, 0, 0)",r.fillRect(0,0,o.width,o.height),r.putImageData(e,2,0);for(var i=o.height,c=0;c<a;c++){var u=s[c]/255;r.fillStyle="rgba(255, 255, 255,"+u+")",r.fillRect(0,i,4,1),i-=1}requestAnimationFrame(t)}()},filter:function(){var t=new(AudioContext||webkitAudioContext),e=t.createMediaElementSource(this.$refs.audio),i=t.createBiquadFilter();e.connect(i),i.connect(t.destination),i.frequency.value=1e4,i.gain.value=30,i.type="highpass",i.frequency.setValueAtTime(0,t.currentTime),i.frequency.linearRampToValueAtTime(120,t.currentTime+10),console.log("filter end")}},mounted:function(){}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"appDigitalInit"},[n("div",{staticClass:"appDigital_S07"},[n("h2",{staticClass:"text-center"},[t._v("Самостоятельная работа №7 123")]),t._v(" "),n("div",{staticClass:"step"},[t._m(0),t._v(" "),n("div",{staticClass:"step__content"},[n("div",{staticClass:"step__descryption"},[t._v("Аудиофайл")]),t._v(" "),n("div",{staticClass:"step__action"},[n("audio",{ref:"audio",attrs:{controls:"",src:i("/XyJ")}},[t._v("\n            Тег audio не поддерживается вашим браузером.\n          ")])])])]),t._v(" "),n("div",{staticClass:"step"},[t._m(1),t._v(" "),n("div",{staticClass:"step__content"},[n("div",{staticClass:"step__descryption"},[n("button",{on:{click:t.step1}},[t._v("Получить спектрограмму")]),t._v(" "),n("button",{on:{click:t.test}},[t._v("Test")]),t._v(" "),n("button",{ref:"stop"},[t._v("Stop")])]),t._v(" "),t._m(2)])]),t._v(" "),n("div",{staticClass:"step"},[t._m(3),t._v(" "),n("div",{staticClass:"step__content"},[n("div",{staticClass:"step__descryption"},[n("button",{on:{click:t.filter}},[t._v("Фильтр")]),t._v(" "),n("button",{ref:"filter_stop"},[t._v("Stop")])]),t._v(" "),n("div",{staticClass:"step__action"})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("1")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("2")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__action",staticStyle:{background:"#3b4652"}},[e("canvas",{attrs:{id:"spectrogram"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step__num"},[e("div",{staticClass:"num"},[this._v("3")])])}]};var s=i("VU/8")(n,a,!1,function(t){i("KPK1")},null,null);e.default=s.exports}});
//# sourceMappingURL=9.985a4a0df2b1664b0492.js.map