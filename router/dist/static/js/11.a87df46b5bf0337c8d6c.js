webpackJsonp([11],{OLl6:function(e,t,n){e.exports=n.p+"static/img/snowflakes-blue.51e3d83.png"},RWje:function(e,t){},cLzS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),o=n("OLl6"),a=n.n(o),s={name:"appSnow",data:function(){return{currentBgUrl:void 0,findPhoto:"Зима",Snowflake:{number:50,maxSpeedX:100,maxSpeedY:200,maxRotateSpeed:20,isActive:!0,time:100,items:[]}}},methods:{changeBg:function(){var e=this;fetch("https://pixabay.com/api/?key=23909248-46987dab904e15ddebe9addff&q="+this.findPhoto+"&image_type=photo&per_page=200").then(function(e){return e.json()}).then(function(t){var n=Math.floor(t.hits.length*Math.random());console.log(t.hits[n]),e.currentBgUrl=t.hits[n].previewURL;var i=document.createElement("img");i.src=t.hits[n].largeImageURL,i.onload=function(){console.log("Установлено большое изображение"),e.currentBgUrl=t.hits[n].largeImageURL},i.onerror=function(){console.log("Ошибка во время загрузки изображения с высоким разрешением")}}).catch(function(e){console.log(e)})},initSnowflake:function(){return{positionX:Math.floor(Math.random()*window.innerWidth),positionY:-100,speedX:Math.floor((Math.random()-.5)*this.Snowflake.maxSpeedX),speedY:Math.floor((Math.random()+.5)*this.Snowflake.maxSpeedY)/2,rotateAngle:0,rotateSpeed:Math.floor((Math.random()-.5)*this.Snowflake.maxRotateSpeed),opacity:1,transition:"none",image:a.a,scaleX:1}},rotateSnowflakes:function(){if(this.Snowflake.isActive)for(var e=this.Snowflake.time,t=0;t<this.Snowflake.number;t++){var n=this.Snowflake.items[t].rotateAngle+this.Snowflake.items[t].rotateSpeed*e/100;i.a.set(this.Snowflake.items[t],"rotateAngle",n)}},fallSnowflakes:function(){if(this.Snowflake.isActive)for(var e=this.Snowflake.time,t=0;t<this.Snowflake.number;t++){var n=this.Snowflake.items[t].positionY+this.Snowflake.items[t].speedY*e/1e3;i.a.set(this.Snowflake.items[t],"positionY",n),n-100>window.innerHeight?i.a.set(this.Snowflake.items,t,this.initSnowflake()):i.a.set(this.Snowflake.items[t],"transition","all 1s linear")}},moveXSnowflakes:function(){if(this.Snowflake.isActive)for(var e=this.Snowflake.time,t=0;t<this.Snowflake.number;t++){var n=this.Snowflake.items[t].positionX+this.Snowflake.items[t].speedX*e/1e3;this.Snowflake.items[t].speedX+=(Math.random()-.5)*this.Snowflake.maxSpeedX,this.Snowflake.items[t].speedX>.8*this.Snowflake.maxSpeedX&&(this.Snowflake.items[t].speedX-=.3*this.Snowflake.maxSpeedX),this.Snowflake.items[t].speedX<-.8*this.Snowflake.maxSpeedX&&(this.Snowflake.items[t].speedX+=.3*this.Snowflake.maxSpeedX),i.a.set(this.Snowflake.items[t],"positionX",n)}},fadeSnowflakes:function(){if(this.Snowflake.isActive){var e=Math.floor(Math.random()*this.Snowflake.number);i.a.set(this.Snowflake.items[e],"opacity",0)}},parkourSnowflakes:function(){if(this.Snowflake.isActive){var e=Math.floor(Math.random()*this.Snowflake.number);i.a.set(this.Snowflake.items[e],"scaleX",-1)}},animateOnTimer:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.floor(200/this.Snowflake.number)+1;this.Snowflake.isActive&&(this.rotateSnowflakes(),this.fallSnowflakes(),this.moveXSnowflakes(),n%i==0&&this.fadeSnowflakes(),this.parkourSnowflakes(),setTimeout(function(){t.animateOnTimer(e,++n,i)},e))}},created:function(){var e=this;this.changeBg(),this.$route.query.snowflakes&&(this.Snowflake.number=this.$route.query.snowflakes),window.onblur=function(){e.Snowflake.isActive=!1},window.onfocus=function(){e.Snowflake.isActive=!0,e.animateOnTimer(e.Snowflake.time)}},mounted:function(){for(var e=0;e<this.Snowflake.number;e++)this.Snowflake.items.push(this.initSnowflake());this.animateOnTimer(this.Snowflake.time)}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-snow",style:{backgroundImage:"url("+this.currentBgUrl+")"}},[t("router-link",{staticClass:"goToMain",attrs:{to:{name:"Main"}}},[this._v("Перейти на главную")]),this._v(" "),this._l(this.Snowflake.items,function(e,n){return t("div",{key:n,staticClass:"snowflake",style:{top:e.positionY+"px",left:e.positionX+"px",transform:"rotate("+e.rotateAngle+"deg) scaleX("+e.scaleX+")",transition:e.transition,opacity:e.opacity,backgroundImage:"url("+e.image+")"}})})],2)},staticRenderFns:[]};var r=n("VU/8")(s,l,!1,function(e){n("RWje")},null,null);t.default=r.exports}});
//# sourceMappingURL=11.a87df46b5bf0337c8d6c.js.map