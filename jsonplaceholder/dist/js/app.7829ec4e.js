(function(){"use strict";var t={9959:function(t,s,e){var o=e(9242),n=e(3396);const i=(0,n._)("h1",{class:"text-center"},"Записи",-1),r={class:"container"},c={class:"text-center download text-center",ref:"download"},l=(0,n._)("div",{class:"download-square"},null,-1),d=(0,n._)("div",{class:"download-square"},null,-1),a=(0,n._)("div",{class:"download-square"},null,-1),u=[l,d,a];function h(t,s,e,o,l,d){const a=(0,n.up)("AppPost");return(0,n.wg)(),(0,n.iD)("div",null,[i,(0,n._)("div",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.posts,((t,s)=>((0,n.wg)(),(0,n.j4)(a,{key:s,post:t,users:l.users,comments:l.comments},null,8,["post","users","comments"])))),128)),(0,n._)("div",c,u,512)])])}var f=e(7139);const p={class:"post mb-5"},m={class:"card w-100"},w={class:"card-body"},v={class:"card-title"},g={class:"card-text"},b={class:"list-group list-group-flush"},y={class:"list-group-item"},_={class:"card-body"},j={key:0,class:"list-group list-group-flush"},k={class:"row"},P={class:"col-md-2"},O={class:"col-md-10"};function C(t,s,e,o,i,r){return(0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("div",m,[(0,n._)("div",w,[(0,n._)("h5",v,(0,f.zw)(e.post.id)+". "+(0,f.zw)(e.post.title),1),(0,n._)("p",g,(0,f.zw)(e.post.body),1)]),(0,n._)("ul",b,[(0,n._)("li",y,"Author: "+(0,f.zw)(r.Author),1)]),(0,n._)("div",_,[(0,n._)("button",{class:"card-link",onClick:s[0]||(s[0]=t=>i.showComments=!i.showComments)},(0,f.zw)(i.showComments?"Скрыть":"Показать")+" комментарии",1)]),i.showComments?((0,n.wg)(),(0,n.iD)("ul",j,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.comments[e.post.id],((t,s)=>((0,n.wg)(),(0,n.iD)("li",{class:"list-group-item",key:s},[(0,n._)("div",k,[(0,n._)("div",P,[(0,n._)("b",null,(0,f.zw)(t.email)+":",1)]),(0,n._)("div",O,[(0,n._)("div",null,[(0,n._)("b",null,(0,f.zw)(t.name),1)]),(0,n._)("div",null,(0,f.zw)(t.body),1)])])])))),128))])):(0,n.kq)("",!0)])])}var x={data(){return{showComments:!1}},props:["post","users","comments"],computed:{Author(){return this.users[this.post.userId]?this.users[this.post.userId].name+", "+this.users[this.post.userId].email:"Not identified"}}},z=e(89);const T=(0,z.Z)(x,[["render",C]]);var M=T,D={components:{AppPost:M},data(){return{posts:[],users:{},comments:{},fetched:0,isThereMore:!0}},methods:{async fetchPost(t){this.download("show"),await fetch(`https://jsonplaceholder.typicode.com/posts/${t}`).then((t=>t.json())).then((t=>{t.id?(this.posts.push(t),this.users[t.userId]||this.getUser(t.userId),this.comments[t.id]||this.getComments(t.id)):(this.isThereMore&&alert("Записи закончились"),this.isThereMore=!1),this.download("hide")}))},getUser(t){fetch(`https://jsonplaceholder.typicode.com/users/${t}`).then((t=>t.json())).then((s=>{this.users[t]=s}))},getComments(t){fetch(`https://jsonplaceholder.typicode.com/posts/${t}/comments`).then((t=>t.json())).then((s=>{this.comments[t]=s}))},download(t){switch(t){case"show":this.$refs.download.classList.remove("d-none");break;case"hide":this.$refs.download.classList.add("d-none");break}},async checkPosition(){const t=document.body.offsetHeight,s=window.innerHeight,e=window.scrollY,o=t-s/10,n=e+s;n>=o&&this.isThereMore&&(await this.fetchPost(++this.fetched),await this.fetchPost(++this.fetched),await this.fetchPost(++this.fetched),await this.fetchPost(++this.fetched),await this.fetchPost(++this.fetched))}},mounted(){this.checkPosition(),window.addEventListener("scroll",this.checkPosition),window.addEventListener("resize",this.checkPosition)}};const A=(0,z.Z)(D,[["render",h]]);var I=A;e(7154);(0,o.ri)(I).mount("#app")}},s={};function e(o){var n=s[o];if(void 0!==n)return n.exports;var i=s[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(s,o,n,i){if(!o){var r=1/0;for(a=0;a<t.length;a++){o=t[a][0],n=t[a][1],i=t[a][2];for(var c=!0,l=0;l<o.length;l++)(!1&i||r>=i)&&Object.keys(e.O).every((function(t){return e.O[t](o[l])}))?o.splice(l--,1):(c=!1,i<r&&(r=i));if(c){t.splice(a--,1);var d=n();void 0!==d&&(s=d)}}return s}i=i||0;for(var a=t.length;a>0&&t[a-1][2]>i;a--)t[a]=t[a-1];t[a]=[o,n,i]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(s){return 0===t[s]};var s=function(s,o){var n,i,r=o[0],c=o[1],l=o[2],d=0;if(r.some((function(s){return 0!==t[s]}))){for(n in c)e.o(c,n)&&(e.m[n]=c[n]);if(l)var a=l(e)}for(s&&s(o);d<r.length;d++)i=r[d],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(a)},o=self["webpackChunkjsonplaceholder"]=self["webpackChunkjsonplaceholder"]||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))}();var o=e.O(void 0,[998],(function(){return e(9959)}));o=e.O(o)})();
//# sourceMappingURL=app.7829ec4e.js.map